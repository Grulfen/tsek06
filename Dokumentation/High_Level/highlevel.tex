\documentclass[a4paper,12pt]{article} \usepackage{graphicx}
\usepackage{epstopdf} %\usepackage{gensymb} \usepackage{longtable}
\usepackage{graphicx}
\input{../LIPS.tex}

\newcommand{\degree}{\ensuremath{^\circ}}
\newcommand{\LIPSartaltermin}{2013/VT}
\newcommand{\LIPSkursnamn}{TSEK06}
\newcommand{\LIPSprojekttitel}{DLL Based Frequency Multiplier}

\newcommand{\LIPSprojektgrupp}{Group 7}

\newcommand{\LIPSgruppepost}{}
\newcommand{\LIPSgrupphemsida}{} 
\newcommand{\LIPSdokumentansvarig}{Gustav Svensk}

\newcommand{\LIPSkund}{ISY, Linköpings universitet, 581\,83 Linköping}

\newcommand{\LIPSkundkontakt}{Amin Ojani}
\newcommand{\LIPSkursansvarig}{Atila Alvandpour}
\newcommand{\LIPShandledare}{Amin Ojani}



\newcommand{\LIPSdokumenttyp}{High Level Simulation} 
\newcommand{\LIPSredaktor}{Nora Björklund} 
\newcommand{\LIPSversion}{0.1} 
\newcommand{\LIPSdatum}{\dagensdatum}

\newcommand{\LIPSgranskare}{} 
\newcommand{\LIPSgranskatdatum}{}
\newcommand{\LIPSgodkannare}{} 
\newcommand{\LIPSgodkantdatum}{}

\begin{document}
\LIPStitelsida

%% Argument till \LIPSgruppmedlem: namn, roll i gruppen, telefonnummer, epost
\selectlanguage{swedish}
\begin{LIPSprojektidentitet}
 
\LIPSgruppmedlem{Nora Björklund}{Project leader}{076 7756
789}{norbj648@student.liu.se}
\LIPSgruppmedlem{\LIPSdokumentansvarig}{Documentation}{073
6208776}{grulfen3@gmail.com} 
\LIPSgruppmedlem{Christopher Hallberg}{}{0739845945}{chrha007@student.liu.se} 
\LIPSgruppmedlem{Gustaf Bengtz}{}{07073607307}{gbengtz@gmail.com} 
\LIPSgruppmedlem{Johan Berneland}{}{0704988329}{johbe915@student.liu.se}
\end{LIPSprojektidentitet}


\selectlanguage{english}

\tableofcontents{} 
\newpage %% Argument till \LIPSversionsinfo: versionsnummer, datum, Ändringar,
         %  utfört av,granskat av
\addcontentsline{toc}{section}{Document history} \begin{LIPSdokumenthistorik} 
\LIPSversionsinfo{0.1}{}{First draft.}{}{}\end{LIPSdokumenthistorik} 
\newpage


\section{Overview}
An overview of the system can be seen in \ref{fig:system}.
\begin{figure}[h]
        \centering
        \includegraphics[width=150mm]{../Bilder/hll_system.png}
        \caption{Overview of the system}
        \label{fig:system}
\end{figure}
\section{Block Level and Description}
In the subsections below the blocks presented above will be described in detail.

\subsection{Phase Detector}
The phase detector (PD) has a very simple design. It is a DFF with the
reference clock as update signal and the delayed clock signal coming
out from the delay cells as input signal. When the reference clock and
the delayed clock are high at the same time a one will be the output,
when they are not the same a zero will be the output. The `Same time' is
 when the clocks are both above the transient voltage (i.e 50\% of
 rise-time/fall-time).
 
\subsection{Counter}
The counter takes an input from the PD and either increments
the internal value, or decrements it. If the input from the PD is one the
counter is incremented, and decresed if the input is zero. The counter also has
an enable signal coming from the lock-detector. If the enable is high the counter
is active, and it is inactive when the enable is low. This is implemented to 
save power, and avoid the toggle state that the counter is bound to end up in when
the phases between the reference clock and the delayed clock match.


\subsection{Delay Cells}
The delay block will in the finished design consist of eight inverter cells,
each delaying the signal 45\degree giving a total delay of 360\degree. In turn
each inverter cell might consist of an odd number of smaller inverters to buffer
the signal in order to obtain better rise and fall times.

However, in the high level implementation the delay cells are modelled
as a single block consisting of Verilog A code. To model the inverter
cells the input signal is inverted eight times and the intermediate
signals are put on the output. Each of the inverters have a rise and a
fall time of 100ps to simulate physical properties. They also have an
inherent delay 


\subsection{Lock-detector}
The lock-detector takes the output signal from the Phase Detector and uses
it to check if the Phase Detector has reached the toggle state or not. If the Phase
Detector send an alternation of increment and decrement instructions to the counter
seven times the Phase Detection is considered to be done and the enable 
signal sent to the counter is put to low. This forces the counter to lock its 
current value which locks the delay.


\subsection{Frequency Multiplier}
The frequency multiplier contains 3 blocks, one 8-input multiplexer, one 3-bit
counter and one 3-input multiplexer, the blocks and connections can be seen in 
figure \ref{fig:freq_mult}.
\begin{figure}[h!b]
        \centering
        \includegraphics[width=0.6\textwidth]{../Bilder/freq_mult_high.png}
        \caption{Frequency Multiplier}
        \label{fig:freq_mult}
\end{figure}
The eight delayed versions of the input signal from the delay cells
are the inputs to the 8-input multiplexer, each signal delayed 45\degree 
compared to the previous one. The output of the 8-input multiplexer is 
connected to the clock of the counter and the output of the counter is 
controlling the 8-input multiplexer. So when a rising edge on the clock
makes the counter tick once, the new clock signal is a 45\degree shifted
version of the previous one, making the counter tick 4 times faster than
if the input signal was used as clock. The 3-input multiplexer chooses which 
signal it to be used as output, bit one, two or three of the counter output. 
In table \ref{tab:mult_fact} the different control signals to choose 
multiplication factor can be seen.
\begin{table}[h!]
        \centering
        \begin{tabular}{|c|c|}
                \hline
                \textbf{Control signals} & \textbf{Multiplication factor} \\
                \hline
                00 & 1 \\
                01 & 2 \\
                10 & 2 \\
                11 & 4 \\
                \hline
        \end{tabular}
        \caption{Multiplication Factors}
        \label{tab:mult_fact}
\end{table}

\section{Simulation Result}
The simulation result of the whole system and the individual Blocks is
presented below.
\subsection{Whole System Simulation}
Simulation of the whole system with a 250 MHz input signal successfully
generates a output of 1 GHz, this can be seen in figure \ref{fig:high_sim}.
It can be noted that it takes a while for the system to produce a good output
with around 50\% duty cycle, this is because it takes some time for the DLL
to lock.
\begin{figure}[hb]
        \centering
        \includegraphics[width=\textwidth]{../Bilder/high_level_sim.png}
        \caption{Simulation of the whole system}
        \label{fig:high_sim}
\end{figure}

%% Insert each blocks's simulation result here
\subsection{Phase Detector}
\subsection{Counter}
\subsection{Delay Cells}
\subsection{Frequency Multiplier}

\section{Risks and Delays}

\end{document} 

%%% Local Variables: %%% mode: latex %%% TeX-master: t %%% End:
