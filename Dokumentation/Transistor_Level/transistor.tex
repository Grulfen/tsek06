\documentclass[a4paper,12pt]{article} \usepackage{graphicx}
\usepackage{epstopdf} %\usepackage{gensymb} \usepackage{longtable}
\usepackage{graphicx}
\usepackage{listings}
\lstset{
language=verilog,
basicstyle=\footnotesize,
breaklines=true
}

\input{../LIPS.tex}

\newcommand{\degree}{\ensuremath{^\circ}}
\newcommand{\LIPSartaltermin}{2013/VT}
\newcommand{\LIPSkursnamn}{TSEK06}
\newcommand{\LIPSprojekttitel}{DLL Based Frequency Multiplier}

\newcommand{\LIPSprojektgrupp}{Group 7}

\newcommand{\LIPSgruppepost}{}
\newcommand{\LIPSgrupphemsida}{} 
\newcommand{\LIPSdokumentansvarig}{Gustav Svensk}

\newcommand{\LIPSkund}{ISY, Linköpings universitet, 581\,83 Linköping}

\newcommand{\LIPSkundkontakt}{Amin Ojani}
\newcommand{\LIPSkursansvarig}{Atila Alvandpour}
\newcommand{\LIPShandledare}{Amin Ojani}

\newcommand{\LIPSdokumenttyp}{Transistor Level Design} 
\newcommand{\LIPSredaktor}{Nora Björklund} 
\newcommand{\LIPSversion}{1.0} 
\newcommand{\LIPSdatum}{\dagensdatum}

\newcommand{\LIPSgranskare}{} 
\newcommand{\LIPSgranskatdatum}{}
\newcommand{\LIPSgodkannare}{} 
\newcommand{\LIPSgodkantdatum}{}

\begin{document}
\LIPStitelsida

%% Argument till \LIPSgruppmedlem: namn, roll i gruppen, telefonnummer, epost
\selectlanguage{swedish}
\begin{LIPSprojektidentitet}
 
\LIPSgruppmedlem{Nora Björklund}{Project leader}{076 7756
789}{norbj648@student.liu.se}
\LIPSgruppmedlem{\LIPSdokumentansvarig}{Documentation}{073
6208776}{grulfen3@gmail.com} 
\LIPSgruppmedlem{Christopher Hallberg}{}{0739845945}{chrha007@student.liu.se} 
\LIPSgruppmedlem{Gustaf Bengtz}{}{07073607307}{gbengtz@gmail.com} 
\LIPSgruppmedlem{Johan Berneland}{}{0704988329}{johbe915@student.liu.se}
\end{LIPSprojektidentitet}


\selectlanguage{english}

\tableofcontents{} 
\newpage %% Argument till \LIPSversionsinfo: versionsnummer, datum, Ändringar,
         %  utfört av,granskat av
\addcontentsline{toc}{section}{Document history}
\begin{LIPSdokumenthistorik} 
        \LIPSversionsinfo{0.1}{}{First draft.}{}{}
\end{LIPSdokumenthistorik} 
\newpage


\section{Block Level and Description}
\subsection{Overview}
An overview of the system can be seen in figure\ref{fig:system}.
\begin{figure}[h]
        \centering
        \includegraphics[width=150mm]{../Bilder/DIA_high_level.png}
        \caption{Overview of the system}
        \label{fig:system}
\end{figure}
\subsection{Phase Detector}
\subsection{Counter}
\subsection{Digitally Controlled Delay Line}
The Digitally Controlled Delay Line, henceforth called delay line, is the part
that delays the input clock signal. The delay line is divided into eight
identical segments, called delay cells, connected in series. Each cell delays the signal 
45\degree giving a total delay of 360\degree. %TODO: BILDER
\begin{figure}[h]
\centering
\includegraphics[width=\textwidth]{../Bilder/Delay_Line/Delay_line_top.png}
\caption{Delay Line}
\label{fig:del_line}
\end{figure}
\subsubsection{Delay Cell}

\subsection{Lock Detector}
For power saving reasons a lock detector has been implemented. The
lock detector detects when the phase error between two signals is
greater than a decided XXXps and then sets its output to 0.


\begin{figure}[h]
        \centering
        \includegraphics[width=150mm]{../Bilder/Lockdetector.png}
        \caption{Lock detector, block overview}
        \label{fig:LD_block}
\end{figure}

The delay blocks have been implemented with inverters that have been
sized to give proper delay to the two input signals.

\subsection{Frequency Multiplier}
The block structure of the frequency multiplier can be seen in figure 
\ref{fig:freq_mult}.
\begin{figure}[p]
        \centering
        \includegraphics[width=0.7\textwidth]{../Bilder/freq_mult_trans.png}
        \caption{Frequency multiplier}
        \label{fig:freq_mult}
\end{figure}

The purpose of the frequency multiplier is to combine the eight delayed signals
to one signal with a frequency that is four times bigger than the input
frequency. This is done by first producing a negative pulse for every rising
edge of the delayed signals. This pulse is produced by the transition detector.
The pulses are then combined to one signal by the edge combiner. The pulse
train is the inputed to the toggle pulsed latch which produces the final output.

The design of the frequency multiplier has changed from the high level report.
This is because the delays in the multiplexer and counter were too high in this
technology, so it was very difficult to reach an output frequency of 1 GHz.

\subsubsection{Transition Detector}
The transition detector consists of three inverters and a symmetric nand gate.
The purpose of the transition detector is to produce negative pulses for every
rising edge that reaches the input. The transistors are sized so the output
pulse is approximately 200 ps long. A buffer is placed at the output of the
circuit to improve rise and fall times.
The gates are connected according to figure \ref{fig:trans_detect}.

Earlier designs had a third input to the symmetric nand to control the
multiplication factor of the circuit by only allowing certain pulses to pass.
This was removed because it was difficult to get a 200 ps pulse with full 

\begin{figure}[p]
        \centering
        \includegraphics[width=0.4\textwidth]{../Bilder/trans_detect_trans.png}
        \caption{Transition Detector}
        \label{fig:trans_detect}
\end{figure}

\subsubsection{Edge Combiner}
The purpose of the edge combiner is to combine the negative pulses from the
transition detectors to one pulse. This is done by a network of symmetric and
gates. The design can be seen in figure \ref{fig:edge_comb}. A buffer is used to
improve the rise and fall times of the final signal.
The sizing of the transistors is inspired from \cite{dll_report}.
It is important that the incoming pulses are not too wide to be able to combine
them to a signal. If they are too wide they will be combined to a constant zero,
which will not produce a valid output.

\begin{figure}[p]
        \centering
        \includegraphics[width=0.6\textwidth]{../Bilder/edge_combiner_trans.png}
        \caption{Edge Combiner}
        \label{fig:edge_comb}
\end{figure}

\subsubsection{Toggle Pulsed Latch}
The toggle pulsed latch toggles its output every time a negative pulse arrives
at the input. The input is a train of pulses from the edge combiner and the
output is the multiplied signal which is the final output of the circuit, after
it is buffered. It is important that the pulses on the input is around 200 ps,
if they are too short the latch will not toggle and if they are too long the
latch will toggle more than once. This delay is controlled by the buffer on the
signal that is fed back to the latch. The toggle pulsed latch is a dynamic
circuit so a keeper is used to keep the internal node stable both at a high and
low value.
The transistor layout can be seen in figure \ref{fig:tpl}. The
sizing is inspired from \cite{dll_report}. 
\begin{figure}[p]
        \centering
        \includegraphics[width=\textwidth]{../Bilder/tpl_trans.png}
        \caption{Toggle Pulsed Latch}
        \label{fig:tpl}
\end{figure}

\section{Simulation Result}
\subsection{Whole System Simulation}
\subsection{Phase Detector}
\subsection{Counter}
\subsection{Digitally Controlled Delay Line}
\subsection{Lock Detector}
\subsection{Frequency Multiplier}
\section{PAD Assignment} % Early test plan också
\section{Risks and Delays}
\subsection{Counter}
\subsection{Digitally Controlled Delay Line}
\subsection{Frequency Multiplier}
\newpage 
\appendix 
\newpage

\addcontentsline{toc}{section}{References}
\begin{thebibliography}{99}
        \bibitem{dll_clock}\textit{A Low-Power Digital DLL-Based Clock Generator in Open-Loop Mode - }
                Behzad Mesgarzadeh, Atila Alvandpour \\
                IEEE Journal of Solid-State Circuits. Vol. 44. No. 7. July 2009
        \bibitem{lock_detect}\textit{A 62.5-625-Mhz Anti-Reset All-Digital Delay-Locked Loop - }
                Shao-Ku Kao, Bo-Jiun Chen and Shen-Iuan Liu \\
                IEEE Transations on Circuits and Systems - II: Express Briefs, Vol. 54 No. 7, July 2007
        \bibitem{dll_report}\textit{DLL-Based Frequency Multiplier - }
                Layout Edition 2008-05-25 

\end{thebibliography}
\end{document} 
%%% Local Variables: %%% mode: latex %%% TeX-master: t %%% End:
